# organoid
# 🧬 Organoid Schedule Manager

Organoid나 임상시험 등의 반복 방문 일정을 자동으로 생성하고 관리하는 웹 애플리케이션입니다.

## 주요 기능

### 1. 📋 템플릿 시스템
- **Organoid 기본 템플릿** 내장 (Day 0-150)
  - Day 0-6: 매일 방문
  - Day 7-15: 매일 방문
  - Day 16-24: 2일마다 방문
  - Day 25-42: 2일마다 방문
  - Day 43-150: 4일마다 방문
- 커스텀 템플릿 추가/삭제 가능
- 템플릿 재사용으로 빠른 일정 생성

### 2. ➕ 스마트 일정 생성
- 시작 희망 기간 입력 시 최적 시작일 추천
- **주말 방문 최소화** 자동 계산
- **기존 라인과의 겹침** 분석 (같은 날 여러 라인 방문 시 효율적)
- 여러 후보 중 선택 가능

### 3. 📅 스케줄 현황 관리
- 활성 라인 수, 남은 방문 횟수 대시보드
- 라인별 상세 정보 (현재 Day, 진행률, 다가오는 방문)
- 라인 완료/삭제 기능
- 전체 스케줄 Excel 다운로드

### 4. 📊 캘린더 뷰
- 주별 전체 방문 일정 시각화
- 주말 방문 강조 표시
- 날짜별 방문해야 할 라인 목록

## 설치 및 실행

### 1. 필요한 패키지 설치
```bash
pip install -r requirements.txt
```

### 2. 웹앱 실행
```bash
streamlit run organoid_scheduler.py
```

브라우저가 자동으로 열리며 `http://localhost:8501`에서 접속 가능합니다.

## 사용 방법

### 첫 라인 추가하기
1. 좌측 메뉴에서 **"➕ 새 라인 추가"** 선택
2. 라인 이름 입력 (예: "Line_A", "환자001")
3. 템플릿 선택 (기본: Organoid)
4. 희망 시작 기간 선택
5. **"최적 시작일 찾기"** 클릭
6. 추천된 시작일 중 선택 (주말 방문 최소화된 순서)

### 스케줄 확인하기
1. **"📅 스케줄 현황"** 메뉴에서 활성 라인 확인
2. 각 라인을 펼쳐서 상세 정보 확인
3. 다가오는 방문 일정 확인
4. 필요시 Excel로 다운로드

### 커스텀 템플릿 만들기
1. **"📋 템플릿 관리"** 메뉴 선택
2. "새 템플릿 추가" 탭 클릭
3. 템플릿 이름 입력
4. 기간별로 스케줄 추가
   - 시작 Day, 종료 Day, 방문 간격 설정
   - "기간 추가" 클릭하여 여러 기간 설정
5. "템플릿 저장" 클릭

### 캘린더로 보기
1. **"📊 캘린더 뷰"** 메뉴 선택
2. 시작 날짜와 표시 기간 설정
3. 주별로 전체 방문 일정 확인
4. 주말 방문은 빨간색으로 표시

## 데이터 저장

- 모든 데이터는 로컬에 JSON 파일로 저장됩니다
  - `schedules_data.json`: 생성된 스케줄
  - `schedule_templates.json`: 템플릿 정보
- 웹앱을 재시작해도 데이터가 유지됩니다
- 백업이 필요하면 이 JSON 파일들을 복사하세요

## 사용 예시

### 예시 1: 새 Organoid 라인 시작
- **상황**: 다음주부터 새 organoid 실험 시작 예정
- **실행**:
  1. 라인 이름: "Org_20240112_A"
  2. 템플릿: Organoid
  3. 희망 시작: 2024-01-15 (월요일)
  4. 검색 범위: 7일
- **결과**: 
  - 월요일 시작: 주말 방문 12회
  - 수요일 시작: 주말 방문 10회 ← **추천!**
  - 기존 Org_B와 Day 25, 42에서 겹침 (같은 날 방문 가능)

### 예시 2: 여러 라인 동시 관리
- 활성 라인: Org_A (Day 45), Org_B (Day 120), Org_C (Day 8)
- 다음 7일 방문: 총 9회
- Org_A: Day 46, 50 방문 예정
- Org_B: Day 121, 125 방문 예정
- Org_C: Day 9, 10, 11, 12, 13 방문 예정 (초기 단계로 매일)

## Tips

1. **주말 방문 최소화**: 여러 시작일 후보 중 주말 방문이 적은 날을 선택하세요
2. **겹침 활용**: 기존 라인과 방문 날짜가 겹치면 한 번에 여러 라인을 처리할 수 있어 효율적입니다
3. **템플릿 저장**: 자주 쓰는 스케줄 패턴은 템플릿으로 저장해두세요
4. **정기적 백업**: schedules_data.json 파일을 주기적으로 백업하세요
5. **Excel 활용**: 전체 스케줄을 Excel로 다운받아 공유하거나 인쇄할 수 있습니다

## 문제 해결

### 웹앱이 열리지 않을 때
```bash
# 포트 변경
streamlit run organoid_scheduler.py --server.port 8502
```

### 데이터 초기화가 필요할 때
```bash
# JSON 파일 삭제
rm schedules_data.json schedule_templates.json
# 재시작하면 기본 설정으로 초기화됩니다
```

## 향후 추가 가능 기능

- [ ] 특정 날짜 제외 (공휴일, 휴가 등)
- [ ] 이메일/알림 기능
- [ ] 통계 및 리포트 생성
- [ ] 여러 사용자 권한 관리
- [ ] 모바일 최적화

## 라이선스

개인 및 연구 목적으로 자유롭게 사용 가능합니다.
